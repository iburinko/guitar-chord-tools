<!--
keytrans javascript
-->
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type="text/css">
        textarea {
            width: 100%;
        }
    </style>
    <title>ギターコードツール Keytrans</title>
    <meta name="description" content="ギターコード関連のフリーソフトです。コード譜を弾きやすいキーに瞬時に移調するKeytransです。ギターやピアノの弾き語りや難しいコードのプレイに便利です。">
    <meta name="keywords" content="ギターコード,コード譜,弾き語り,移調,転調">
    <LINK REL=STYLESHEET HREF="../master.css">
    <STYLE TYPE="text/css"></STYLE>
    <LINK REL="SHORTCUT ICON" HREF="../favicon.ico">
    <!-- google-analytics -->
</head>

<body onload="init()">
    <!-- ========== ヘッダ========== -->
    <DIV Class="section-headder">Keytrans <font class=small-font>(SongBook Transponser)</font></DIV>
    <!-- ========== b,#ボタン==========
    <div id="bt" Align="center" style="margin-top:2px;margin-bottom:8px;">
        <button id="bt_down" onclick="keytrans_bind('down')" style="width:49%">b</button>
        <button id="bt_up" onclick="keytrans_bind('up')" style="width:49%">#</button>
    </div>
     -->
    <div id="bt" Align="center" style="margin-top:8px;margin-bottom:8px;">
        <button class="button1" id="bt_down" onclick="keytrans_bind('down')">b(keyDown)</button>
        <button class="button1" id="bt_up" onclick="keytrans_bind('up')" >#(keyUp)</button>
    </div>
    <!-- ========== テキストエリア ========== -->
    <form name="fmt">
<textarea spellcheck="false" rows="25">
コード譜をここにコピー&ペーストして、上のb(フラット)ボタンや
#(シャープ)ボタンを押してみてください。コード譜内の G や Am 
といったコードが移調します。以下、コード譜のサンプルです。

------------------------------------
いい日食べ立ち
------------------------------------
Ebm  G#7  C#maj7 Bbm7  Ebm  F7
Bbm  F7  Bbm  F7

 Bbm     F7    Bb7      Ebm
雪鍋 間近の 北の空に向かい
G#7            C#   Bbm7 C7 Ebm6/F#  F7sus4 F7
スズキ去りし日々の夢を  叫  ぶ    時
 Bbm     F7  Bb7      Ebm
蛙るらぬ 人達 熱い胸をよぎる
G#7            C#     Bbm7 C7 F7    Bbm  Bb7
なめて今日から一人きり  旅 に出る

  Ebm  G#7          C#  (Bb7sus4/B)  Bb7
尼、 日本のどこかに
    Ebm       Cm7b5      F7
和菓子を待ってる人がいる
 Bbm     F7    Bb7        Ebm
いい日 食べ立ち 夕焼けをさがしに
G#7        C#   Bbm7 C7  F7      Bbm
サバの背中で聞いた歌を 道連れに
</textarea>
    </form>
    <!-- ========== フッタ1 ========== -->
    <style type="text/css">
        .samename {
            border-collapse: collapse;
            background-color: #ffffff;
        }
        .button1 {
            width:49%;
            text-decoration:none;
            display:inline-block;
            text-align:center;
            padding:8px 0px;
//            font-weight: bold;
//            color:#fff;
            border-radius:5px;
        }
        .button2 {
            width:45%;
            text-decoration:none;
            display:inline-block;
            text-align:center;
            padding:8px 0px;
//            font-weight: bold;
//            color:#fff;
            border-radius:5px;
        }
    </style>
    <table border="0" width="100%" style="margin-top:0px;">
        <!-- 異名同音(option) -->
        <tr>
        <td align="left" valign="top">
            Option（異名同音）
            <br>
            <table class="samename" border="1">
                <tr>
                    <td>
                        <form name="Cs">
                            <input type="radio" name="Cs_g" id="Cs_Cs" value="C#" checked="checked" />
                            <label for="Cs_Cs">C#</label><br>
                            <input type="radio" name="Cs_g" id="Cs_Df" value="Db" />
                            <label for="Cs_Df">Db</label><br>
                        </form>
                    </td>
                    <td>
                        <form name="Ef">
                            <input type="radio" name="Ef_g" id="Ef_Ds" value="D#" />
                            <label for="Ef_Ds">D#</label><br>
                            <input type="radio" name="Ef_g" id="Ef_Ef" value="Eb" checked="checked" />
                            <label for="Ef_Ef">Eb</label><br>
                        </form>
                    </td>
                    <td>
                        <form name="Fs">
                            <input type="radio" name="Fs_g" id="Fs_Fs" value="F#" checked="checked" />
                            <label for="Fs_Fs">F#</label><br>
                            <input type="radio" name="Fs_g" id="Fs_Gf" value="Gb" />
                            <label for="Fs_Gf">Gb</label><br>
                        </form>
                    </td>
                    <td>
                        <form name="Gs">
                            <input type="radio" name="Gs_g" id="Gs_Gs" value="G#" checked="checked" />
                            <label for="Gs_Gs">G#</label><br>
                            <input type="radio" name="Gs_g" id="Gs_Af" value="Ab" />
                            <label for="Gs_Af">Ab</label><br>
                        </form>
                    </td>
                    <td>
                        <form name="Bf">
                            <input type="radio" name="Bf_g" id="Bf_As" value="A#" />
                            <label for="Bf_As">A#</label><br>
                            <input type="radio" name="Bf_g" id="Bf_Bf" value="Bb" checked="checked" />
                            <label for="Bf_Bf">Bb</label><br>
                        </form>
                    </td>
                </tr>
            </table>
        </td>
        <!-- amazon ad -->
<!--
        <td align="center" valign="top">
            <a href="https://astore.amazon.co.jp/guitarchordto-22/">
                <img src="SongBook.png" width="40" height="40">
            </a>
        </td>
-->
        <!-- 文字サイズ -->
        <td align="left" valign="buttom">
            文字サイズ
            <div id="bt" Align="center">
                <button class="button2" id="bt_minus" onclick="textarea_fontsize('down')">-</button>
                <button class="button2" id="bt_plus" onclick="textarea_fontsize('up')">+</button>
            </div>
        </td>
        </tr>
   </table>
   <!-- ========== フッタ2 ========== -->
   <!-- blog, ホーム, advertizement site -->
   <table border="0" width="100%" style="margin-top:0px;table-layout:fixed;">
        <tr>
            <td align="left" valign="buttom">
                <a href="http://blog.livedoor.jp/wibu/">Blog</a><br>
            </td>
            <td align="center" valign="buttom">
                <a href="../">GuitarChordTools</a>
            </td>
            <td align="right" valign="buttom">
<!--
<a target="_blank" href="https://www.amazon.co.jp/gp/search?ie=UTF8&tag=guitarchordto-22&linkCode=ur2&linkId=ba23fc71caf6206a2409f0dd17e20ff0&camp=247&creative=1211&index=books&keywords=ギターコード">コード本</a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=guitarchordto-22&l=ur2&o=9" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />
-->
            </td>
        </tr>
    </table>
    <!-- ========== スクリプト ========== -->
    <!-- <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> -->
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="keytrans.js"></script>
    <script>
        //------------------------------------------------
        // textareaの高さを画面サイズによって自動でリサイズする。
        //------------------------------------------------
        let header_bottom_size = 182; //ヘッダとフッタの高さの合計(広告なし)
        //let header_bottom_size = 256; //ヘッダとフッタの高さの合計(広告あり)
        //let header_bottom_size = 280; //ヘッダとフッタの高さの合計(広告あり)
        $(document).ready(function () {
            hsize = $(window).innerHeight() - header_bottom_size;
            $("textarea").css("height", hsize + "px");
        });
        $(window).resize(function () {
            hsize = $(window).innerHeight() - header_bottom_size;
            $("textarea").css("height", hsize + "px");
        });
        //------------------------------------------------
        // textareaのfontサイズを大小する。
        //------------------------------------------------
        function textarea_fontsize(up_down) {
            let cur_size = Number($("textarea").css("fontSize").split("px")[0]);
            if(up_down == "up"){
                cur_size += 2;
            } else{
                if(cur_size > 8){
                    cur_size -= 2;
                }
            }
            $("textarea").css("fontSize", cur_size + "px");
        }
        //------------------------------------------------
        // keytransを呼び出す。
        //------------------------------------------------
        function keytrans_bind(up_down) {
            // 異名同音を取得する。
            let Cs_str = $('input[name=Cs_g]:checked').val();
            let Ef_str = $('input[name=Ef_g]:checked').val();
            let Fs_str = $('input[name=Fs_g]:checked').val();
            let Gs_str = $('input[name=Gs_g]:checked').val();
            let Bf_str = $('input[name=Bf_g]:checked').val();
            // textareaのコード譜を移調し、結果をtextareaに上書きする。
            let new_str = keytrans(document.fmt.elements[0].value, up_down,
                Cs_str, Ef_str, Fs_str, Gs_str, Bf_str);
            document.fmt.elements[0].value = new_str;
        }
    </script>
</body>
</html>